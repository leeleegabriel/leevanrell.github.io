<p>This guide is for anyone who wants to setup a MotionEye cam. You’ll need a raspberry pi (I recommend a pi 3b or better, but you can get away with a 2), a ~gb sd card, raspberry pi camera and ribbon cable, and a 5v power supply.</p>

<p>For those who want a 3d printable case and camera holder, I recommend [this][https://www.thingiverse.com/thing:4099543] case (I designed it and use it myself). Otherwise there plenty of commercial options</p>

<p>Besides that, the setup for MotionEyeOS is relatively easy. Although there are some tweaks that I find important to have a more functional surveillance system. We’ll talk about that more later.</p>

<p>First, go motioneye’s releases page:[https://github.com/ccrisan/motioneyeos/releases]. Download the corresponding images for your board. Once, downloaded plug in your preferred image flashing utility, I prefer [balenaEtcher][https://www.balena.io/etcher].</p>

<p>If you want to use wifi with the pi, you can drop wpa_supplicant.conf in the root directory of the sd card and paste this into the file:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    country=US
    update_config=1
    ctrl_interface=/var/run/wpa_supplicant
    
    network={
        scan_ssid=1
        ssid="MyWiFiSSID"
        psk="S3cr3tp@$$w0rc|"
    }
</code></pre></div></div>
<p>Be sure to replace the SSID and PSK with your SSID and password. If you have any questions or frustrations fuck off to the [git][https://github.com/ccrisan/motioneyeos/wiki/Wifi-Preconfiguration]. Once this is finished, we’re now done with the sd card and you can plug it into the pi.</p>

<p>Now for the camera. For the camera connector, usually the side with the metal contacts should face toward the camera. Lift the slide clamp of the connector to make it easier to slide the ribbon cable in. Slide in the ribbon cable. Now pull it out and put it back in. Repeat until climax. Once finished slide it in again and push the clamp back. Don’t use too much force. They’re gentle creatures. Now for the pi connector. The process is pretty much the same. The connector you want is the one closest to the USB/Ethernet ports. Don’t put it in the wrong hole. The metal contacts should face towards the HDMI port/away from the USB/Ethernet ports.</p>

<p>Once this is complete, you’re set to turn on the pi. The boot process takes some time to complete. You can use a network tool to monitor once the pi has come online like angryIPscanner (Windows/normie) or nmap (linux/windows).</p>

<p>The login is admin and the password should be left blank. If you’re not being prompted for a admin login the first time, click the person icon in the top left corner.</p>

<p>First thing you should do now is change the password to something a little more secure (try password123).</p>

<p>For the settings, it’s important to note that this is all running on something that consumes less than 4 watts under load and has a full linux kernel and network stack. So it’s not going to be able to stream and capture 1920x1080@60fps easily (I’m sure this is gonna age well). Although maybe the newer pi’s can handle it better, IDGAF.</p>

<p>Something I like to do is enable push notifications via [Pushover][https://pushover.net/]. First Enable Motion Detection like so [motion pic][motion.png]. You can set the mask to only trigger off of a area of interest like a door/entryway/shower/etc. The redhighlighted area is the area that is ignored by the camera. Also note that these settings might not work for everyone and aren’t set in stone. This just works for me.</p>

<p>Now that motion detection is enabled go one tab down to ‘Motion Notifications’. Enable Run a Command and enter as follows:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python /root/notify.py
</code></pre></div></div>

<p>Next, enable ssh server in the services tab.
Hit the annoying orange apply tab. The pi should reboot. Nnce the pi is back up, SSH into with a ssh client (if you’ve made it this far you probably know what your doing and don’t need help getting one). Since the creators are complete Nazis, the entire fs is read only so we’ll need to run:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount -o remount,rw /
mount -o remount,rw /boot

</code></pre></div></div>
<p>Next thing is to open /root/notify.py</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ nano /root/notify.py #they include nano tho?
</code></pre></div></div>

<p>Write the following python script:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import httplib, urllib, urllib2

req = urllib2.Request('http://icanhazip.com', data=None) 
response = urllib2.urlopen(req, timeout=5)
response = response.read().strip('\n')
port = 80

conn = httplib.HTTPSConnection("api.pushover.net:443")
conn.request("POST", "/1/messages.json",
urllib.urlencode({
    "token": "APP_TOKEN",                       # Insert app token here
    "user": "USER_TOKEN",                       # Insert user token here
    "html": "1",                                # 1 for HTML, 0 to disable
    "title": "Motion Detected!",                # Title of the message
    "message": "&lt;b&gt;Front Door&lt;/b&gt; camera!",     # Content of the message - include HTML if required
    "url": "http://"+response+":"+str(port),         # Link to be included in message
    "url_title": "View live stream",            # Text for the link
    "sound": "siren",                           # Define the sound played on the receiving device
}), { "Content-type": "application/x-www-form-urlencoded" })
conn.getresponse()
</code></pre></div></div>

<p>To generate a user and app token head over to Pushover and they’ll get you setup. The service costs a few bucks for an account and provides a 7,500 messages/month. If your too cheap to pay that dunno why’d you waste $50 on a shitty webcam. You’re done Ctrl^O and Ctrl^x and exit the ssh session. Now, download Pushover’s app and you should be set to receive messages. Once the api token and user token are set, try and run the following command in the ssh shell.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ python /root/notify.py
</code></pre></div></div>
<p>With any luck you should receive a push notification.</p>

<p>Other than that Motioneye also has Cloud storage option if you trust your data with Google/DropBox. Look at the File Storage tab if that interests you.</p>

<p>To keep your pi from dying a slow death, I recommend disabling Video Streaming, and lowering the Movie/Still Quality to ~60-75%. I also have my video resolution set to 720p@10fps and am mildly satisfied with it.
That’s it. You survived. Adorable.</p>
